<!DOCTYPE html>
<html lang="zh-CN" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCATFLAGS 2025+ | CTF Competition</title>
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gold: {
                            400: '#FCD34D',
                            500: '#D4AF37',
                            600: '#B4942A',
                            900: '#423408',
                        },
                        dark: {
                            bg: '#020202',
                            surface: '#0a0a0a',
                            border: '#262626'
                        },
                        light: {
                            bg: '#f8fafc',
                            surface: '#ffffff',
                            text: '#111827'
                        }
                    },
                    fontFamily: {
                        'mono': ['"JetBrains Mono"', 'monospace'],
                        'sans': ['"Space Grotesk"', 'sans-serif'],
                        'serif': ['"Playfair Display"', 'serif'],
                    },
                    boxShadow: {
                        'hard': '4px 4px 0px 0px rgba(0,0,0,1)',
                        'hard-gold': '4px 4px 0px 0px rgba(212, 175, 55, 0.3)',
                    },
                    animation: { 'page-enter': 'fadeIn 0.5s ease-out forwards' },
                    keyframes: { fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@100;400;700&family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- 核心基础设置 --- */
        :root { --cursor-size: 20px; }
        
        body, html { 
            margin: 0; 
            padding: 0; 
            font-family: 'Space Grotesk', sans-serif; 
            overflow-x: hidden; /* 防止水平溢出 */
            scroll-behavior: smooth; 
            transition: background-color 0.5s ease, color 0.5s ease; 
        }

        /* 核心：菜单打开时的防滚动锁 */
        body.menu-open {
            overflow: hidden !important; /* 强制禁止滚动 */
            height: 100vh; 
            height: 100dvh; /* 适配移动端动态高度 */
            padding-right: 0;
            touch-action: none; /* 禁止触摸滚动 */
        }

        body:not(.dark) { 
            background-image: linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px); 
            background-size: 40px 40px; 
        }

        /* --- 滚动条样式 --- */
        ::-webkit-scrollbar { width: 6px; }
        .dark ::-webkit-scrollbar-track { background: #020202; }
        .dark ::-webkit-scrollbar-thumb { background: #333; border: 1px solid #222; }
        ::-webkit-scrollbar-track { background: #fff; }
        ::-webkit-scrollbar-thumb { background: #ccc; border: 1px solid #eee; }

        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* --- 背景与特效 --- */
        .noise-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; z-index: 999; opacity: 0.04; 
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"); 
        }
        #bg-canvas { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: -2; opacity: 0.8; transition: opacity 0.5s; 
        }
        
        /* --- 自定义光标 --- */
        #cursor { 
            position: fixed; top: 0; left: 0; 
            width: var(--cursor-size); height: var(--cursor-size); 
            border-radius: 50%; pointer-events: none; z-index: 9999; 
            transition: border-color 0.2s, background-color 0.2s, width 0.2s, height 0.2s;
            transform: translate3d(-100px, -100px, 0) translate(-50%, -50%);
            will-change: transform;
        }
        
        .dark #cursor { border: 1px solid rgba(212, 175, 55, 0.8); box-shadow: 0 0 4px rgba(212, 175, 55, 0.2); }
        .dark #cursor.hovered { background-color: rgba(212, 175, 55, 0.15); border-color: #D4AF37; box-shadow: 0 0 15px rgba(212, 175, 55, 0.5); width: 50px; height: 50px; }

        html:not(.dark) #cursor { border: 1px solid rgba(0, 0, 0, 0.8); }
        html:not(.dark) #cursor.hovered { background-color: rgba(0, 0, 0, 0.1); border-color: #000; width: 50px; height: 50px; }

        /* --- 文字故障效果 (Glitch) --- */
        .glitch-hover { position: relative; transition: all 0.2s; }
        .dark .glitch-hover:hover { color: #D4AF37; text-shadow: 2px 0 #fff, -2px 0 #b4942a; }
        html:not(.dark) .glitch-hover:hover { color: #000; text-shadow: 2px 0 #D4AF37, -2px 0 #666; }

        .glitch-wrapper { position: relative; display: inline-block; font-weight: 900; line-height: 1; user-select: none; }
        .glitch-title { position: relative; z-index: 1; }
        .glitch-title::before, .glitch-title::after { content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: transparent; opacity: 0.8; }
        
        html:not(.dark) .glitch-title::before { text-shadow: -2px 0 #ff00c1; clip-path: inset(0 0 0 0); animation: glitch-anim-2 3s infinite linear alternate-reverse; }
        html:not(.dark) .glitch-title::after { text-shadow: -2px 0 #00fff9; clip-path: inset(0 0 0 0); animation: glitch-anim-1 2.5s infinite linear alternate-reverse; }
        .dark .glitch-title::before { text-shadow: 2px 0 #D4AF37; clip-path: inset(0 0 0 0); animation: glitch-anim-gold-1 4s infinite linear alternate-reverse; }
        .dark .glitch-title::after { text-shadow: -2px 0 #fff; clip-path: inset(0 0 0 0); animation: glitch-anim-gold-2 3s infinite linear alternate-reverse; }
        
        .glitch-title::before, .glitch-title::after { opacity: 0; transition: opacity 0.1s; }
        @media (hover: hover) { .glitch-wrapper:hover .glitch-title::before, .glitch-wrapper:hover .glitch-title::after { opacity: 1; } }
        @media (hover: none) { .glitch-title::before, .glitch-title::after { animation-duration: 5s; opacity: 0.6; animation-play-state: running; } }

        @keyframes glitch-anim-1 { 0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 1px); } 20% { clip-path: inset(60% 0 10% 0); transform: translate(2px, -1px); } 40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); } 60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); } 80% { clip-path: inset(10% 0 70% 0); transform: translate(-1px, 1px); } 100% { clip-path: inset(30% 0 20% 0); transform: translate(1px, -1px); } }
        @keyframes glitch-anim-2 { 0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -1px); } 20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 2px); } 40% { clip-path: inset(30% 0 20% 0); transform: translate(2px, 1px); } 60% { clip-path: inset(10% 0 80% 0); transform: translate(-1px, -2px); } 80% { clip-path: inset(50% 0 30% 0); transform: translate(1px, 2px); } 100% { clip-path: inset(20% 0 70% 0); transform: translate(-2px, 1px); } }
        @keyframes glitch-anim-gold-1 { 0% { clip-path: inset(50% 0 30% 0); transform: translate(2px, 0); } 100% { clip-path: inset(10% 0 60% 0); transform: translate(-2px, 0); } }
        @keyframes glitch-anim-gold-2 { 0% { clip-path: inset(10% 0 50% 0); transform: translate(-2px, 0); } 100% { clip-path: inset(80% 0 5% 0); transform: translate(2px, 0); } }

        /* --- 卡片样式 (Cards) --- */
        .card-inner { position: relative; height: 100%; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); backdrop-filter: blur(12px); overflow: hidden; }
        .dark .card-inner { background: rgba(10, 10, 10, 0.6); border: 1px solid rgba(212, 175, 55, 0.3); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5); }
        .dark .card-inner:hover { border-color: #D4AF37; box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); transform: translateY(-4px); }
        html:not(.dark) .card-inner { background: rgba(255, 255, 255, 0.9); border: 2px solid #000; box-shadow: 4px 4px 0px 0px #000; }
        html:not(.dark) .card-inner:hover { transform: translate(2px, 2px); box-shadow: 2px 2px 0px 0px #000; }
        
        .card-content { position: relative; z-index: 2; }
        .card-glare { position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0; transition: opacity 0.3s; pointer-events: none; mix-blend-mode: screen; z-index: 1; }
        .dark .card-glare { background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(255, 215, 0, 0.15) 0%, transparent 60%); }
        html:not(.dark) .card-glare { background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(0, 0, 0, 0.05) 0%, transparent 60%); mix-blend-mode: multiply; }
        .card-container:hover .card-glare { opacity: 1; }

        .skill-tag { display: inline-block; font-size: 0.75rem; padding: 2px 8px; margin-right: 4px; margin-bottom: 4px; transition: all 0.2s; font-family: 'JetBrains Mono', monospace; font-weight: bold; }
        .dark .skill-tag { border: 1px solid rgba(100, 100, 100, 0.3); color: #888; }
        .dark .card-container:hover .skill-tag { border-color: #D4AF37; color: #000; background: #D4AF37; }
        html:not(.dark) .skill-tag { border: 1px solid #000; color: #000; background: transparent; }
        html:not(.dark) .card-container:hover .skill-tag { background: #000; color: #fff; }

        /* --- 其他组件样式 --- */
        .countdown-item { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 1rem; min-width: 80px; backdrop-filter: blur(4px); }
        .dark .countdown-item { border: 1px solid rgba(212, 175, 55, 0.2); background: rgba(5, 5, 5, 0.8); }
        html:not(.dark) .countdown-item { border: 2px solid #000; background: rgba(255, 255, 255, 0.9); box-shadow: 4px 4px 0px 0px #000; }
        
        .timeline-item .timeline-dot { transition: all 0.3s; }
        .dark .timeline-active .timeline-dot { background-color: #D4AF37 !important; box-shadow: 0 0 15px #D4AF37; }
        html:not(.dark) .timeline-active .timeline-dot { background-color: #000 !important; box-shadow: 0 0 0 2px #fff, 0 0 0 4px #000; }
        .timeline-item h3 { transition: color 0.3s; }
        .dark .timeline-active h3 { color: #D4AF37; }
        html:not(.dark) .timeline-active h3 { color: #000; text-decoration: underline; text-decoration-thickness: 2px; text-decoration-color: #D4AF37; }
        
        .badge-live { padding: 2px 6px; font-size: 0.6rem; font-weight: bold; margin-left: 8px; border-radius: 0px; letter-spacing: 1px;}
        .dark .badge-live { background: #D4AF37; color: #000; }
        html:not(.dark) .badge-live { background: #000; color: #fff; border: 1px solid #000; }
        .badge-done { padding: 2px 6px; font-size: 0.6rem; margin-left: 8px; border-radius: 0px;}
        .dark .badge-done { background: #222; color: #666; border: 1px solid #444; }
        html:not(.dark) .badge-done { background: #eee; color: #999; border: 1px solid #999; }
        
        section { padding: 8rem 1rem; max-width: 1400px; margin: 0 auto; }

        /* =========================================
           移动端全屏菜单 (Mobile Menu) - 核心修改
           ========================================= */
        #mobile-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh; /* 兼容旧浏览器 */
            height: 100dvh; /* 核心：适配 Safari/Chrome 移动端动态工具栏高度 */
            z-index: 100; /* 高层级，遮住导航栏 */
            
            /* 允许内容过多时滚动，但不传递滚动给 body */
            overflow-y: auto;
            overscroll-behavior: contain;
            touch-action: auto;
            
            transition: opacity 0.3s ease, visibility 0.3s ease, backdrop-filter 0.3s ease;
        }

        /* 菜单链接样式 */
        .mobile-link {
            position: relative;
            display: inline-block;
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        .mobile-link:active {
            transform: scale(0.95);
        }

        /* 状态切换 */
        .hidden-menu { 
            opacity: 0; 
            visibility: hidden; 
            pointer-events: none; 
            backdrop-filter: blur(0px);
        }
        .visible-menu { 
            opacity: 1; 
            visibility: visible; 
            pointer-events: auto; 
            backdrop-filter: blur(16px); /* 开启时背景高斯模糊 */
        }

        /* 汉堡按钮动画 - 依赖 body.menu-open */
        .icon-line { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: center; }
        
        body.menu-open #mobile-menu-btn .line-1 { transform: translateY(6px) rotate(45deg); }
        body.menu-open #mobile-menu-btn .line-2 { opacity: 0; transform: translateX(-10px); }
        body.menu-open #mobile-menu-btn .line-3 { transform: translateY(-6px) rotate(-45deg); }
        
        /* 简单的淡入动画 */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-light-bg dark:bg-dark-bg text-light-text dark:text-gray-300 selection:bg-gold-500 selection:text-white transition-colors duration-500 animate-page-enter">

    <div class="noise-overlay"></div>
    <div id="cursor"></div>
    <canvas id="bg-canvas"></canvas>

    <!-- 导航栏 -->
    <nav class="fixed top-0 left-0 w-full z-50 flex justify-between items-center px-6 py-6 backdrop-blur-md border-b transition-colors duration-500 
        dark:bg-black/60 dark:border-gold-500/20 
        bg-white/90 border-black">
        
        <div class="text-xl font-bold tracking-tighter cursor-pointer hover-trigger transition-colors dark:text-gold-500 text-black flex items-center gap-2 relative z-50">
            <span class="w-3 h-3 bg-current rounded-full"></span>
            UCATFLAGS_
        </div>
        
        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-8 text-sm uppercase tracking-widest font-bold">
            <a href="notice/notice.html" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">公告</a>
            <a href="#about" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">介绍</a>
            <a href="#tracks" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">赛题</a>
            <a href="warmup/warmup.html" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">赛题示例</a>
            <a href="#schedule" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">赛程</a>
            <a href="#details" class="hover-trigger transition-colors dark:hover:text-gold-500 hover:text-gold-600">评分</a>
            
            <button onclick="toggleTheme()" class="hover-trigger p-2 rounded-full transition-colors dark:hover:bg-white/10 hover:bg-black/5">
                <svg class="w-5 h-5 hidden dark:block text-gold-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <svg class="w-5 h-5 block dark:hidden text-black" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </button>

            <a href="https://www.wjx.cn/vm/hG49aBH.aspx#" target="_blank" class="px-5 py-2 text-sm font-bold transition-all hover-trigger
                dark:text-black dark:bg-gold-500 dark:hover:bg-white dark:border-none
                text-white bg-black hover:bg-white hover:text-black border-2 border-transparent hover:border-black shadow-hard hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px]">
                立即报名
            </a>
        </div>

        <!-- Mobile Menu Button - Z-index set to 101 to ensure it's ABOVE the overlay -->
        <button id="mobile-menu-btn" class="md:hidden z-[101] relative w-10 h-10 flex flex-col justify-center items-center gap-1.5 focus:outline-none cursor-pointer">
            <span class="icon-line line-1 w-6 h-0.5 bg-black dark:bg-white block pointer-events-none"></span>
            <span class="icon-line line-2 w-6 h-0.5 bg-black dark:bg-white block pointer-events-none"></span>
            <span class="icon-line line-3 w-6 h-0.5 bg-black dark:bg-white block pointer-events-none"></span>
        </button>
    </nav>

    <!-- Optimized Mobile Menu (Centered & Fullscreen) -->
    <div id="mobile-menu" class="hidden-menu fixed inset-0 bg-white/95 dark:bg-black/95 flex flex-col justify-center items-center text-center p-6 transition-all duration-300">
        <!-- 内部容器：用于 Flex 布局居中 -->
        <div class="min-h-full w-full flex flex-col justify-center items-center py-10 px-6">
            
            <!-- 菜单内容区 -->
            <div class="flex flex-col items-center gap-8 w-full max-w-sm animate-[fadeIn_0.4s_ease-out]">
                
                <!-- 顶部装饰线 -->
                <div class="w-px h-16 bg-gradient-to-b from-transparent via-gold-500 to-transparent opacity-50"></div>
                
                <!-- 导航链接 -->
                <div class="flex flex-col space-y-6 text-center">
                    <a href="notice/notice.html" class="mobile-link text-3xl font-serif font-bold tracking-widest text-black dark:text-white hover:text-gold-600 dark:hover:text-gold-500 transition-colors">公告</a>
                    <a href="#about" class="mobile-link text-3xl font-serif font-bold tracking-widest text-black dark:text-white hover:text-gold-600 dark:hover:text-gold-500 transition-colors">介绍</a>
                    <a href="#tracks" class="mobile-link text-3xl font-serif font-bold tracking-widest text-black dark:text-white hover:text-gold-600 dark:hover:text-gold-500 transition-colors">赛题</a>
                    <a href="warmup/warmup.html" class="mobile-link text-3xl font-serif font-bold tracking-widest text-black dark:text-white hover:text-gold-600 dark:hover:text-gold-500 transition-colors">示例</a>
                    <a href="#schedule" class="mobile-link text-3xl font-serif font-bold tracking-widest text-black dark:text-white hover:text-gold-600 dark:hover:text-gold-500 transition-colors">赛程</a>
                </div>
    
                <!-- 功能按钮区 -->
                <div class="flex flex-col w-full gap-4 mt-4">
                    <button onclick="toggleTheme()" class="mobile-link group relative overflow-hidden border border-black dark:border-gray-600 px-8 py-3 transition-all hover:bg-black dark:hover:bg-gold-500 w-full">
                        <span class="relative z-10 font-mono text-sm font-bold tracking-widest group-hover:text-white dark:group-hover:text-black">SWITCH THEME</span>
                    </button>
    
                    <a href="https://www.wjx.cn/vm/hG49aBH.aspx#" target="_blank" class="mobile-link block w-full text-center bg-black dark:bg-white text-white dark:text-black px-8 py-3 shadow-hard hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-none transition-all">
                        <span class="font-mono text-sm font-bold tracking-widest">REGISTER NOW</span>
                    </a>
                </div>
                
                <!-- 底部装饰线 -->
                <div class="w-px h-16 bg-gradient-to-b from-transparent via-gold-500 to-transparent opacity-50"></div>
            </div>
        </div>
    </div>

    <!-- Hero Header -->
    <header class="h-screen flex flex-col justify-center items-center relative px-4 perspective-container overflow-hidden">
        
        <div class="absolute top-[15%] left-0 w-full text-center pointer-events-none z-20 transition-opacity duration-500 dark:opacity-40 opacity-100">
            <p class="font-mono text-xs tracking-[1em] dark:text-gold-600 text-black/50 font-bold">中国科学院大学本科部级CTF赛事</p>
        </div>

        <div class="z-30 text-center mb-8 glitch-wrapper">
            <h1 class="glitch-title text-[12vw] md:text-[8rem] font-serif font-black tracking-tighter dark:text-gold-500 text-black leading-none" data-text="UCATFLAGS">
                UCATFLAGS
            </h1>
            <div class="text-2xl md:text-4xl font-mono tracking-[0.5em] mt-2 dark:text-white text-black opacity-80">
                2025+
            </div>
        </div>

        <!-- 倒计时 -->
        <div class="grid grid-cols-4 gap-4 mt-12 mb-12 font-mono z-30 relative transition-colors duration-500">
            <div class="countdown-item hover-trigger">
                <span id="days" class="text-3xl font-bold dark:text-white text-black">00</span><span class="text-xs dark:text-gold-500 text-gray-500 font-bold">DAYS</span>
            </div>
            <div class="countdown-item hover-trigger">
                <span id="hours" class="text-3xl font-bold dark:text-white text-black">00</span><span class="text-xs dark:text-gold-500 text-gray-500 font-bold">HR</span>
            </div>
            <div class="countdown-item hover-trigger">
                <span id="minutes" class="text-3xl font-bold dark:text-white text-black">00</span><span class="text-xs dark:text-gold-500 text-gray-500 font-bold">MIN</span>
            </div>
            <div class="countdown-item hover-trigger">
                <span id="seconds" class="text-3xl font-bold dark:text-white text-black">00</span><span class="text-xs dark:text-gold-500 text-gray-500 font-bold">SEC</span>
            </div>
        </div>
        
        <div class="absolute bottom-10 animate-bounce text-xs tracking-widest dark:text-gray-600 text-black font-bold z-30">
            SCROLL TO EXPLORE
        </div>
    </header>

    <!-- About -->
    <section id="about" class="grid md:grid-cols-2 gap-12 items-start relative z-10 transition-colors duration-500 bg-gradient-to-b dark:from-transparent dark:to-[#020202] from-transparent to-white">
        <div>
            <h2 class="text-5xl font-serif mb-8 border-l-4 pl-6 glitch-hover transition-colors dark:border-gold-500 dark:text-white border-black text-black">
                Introduction
            </h2>
        </div>
        <div class="font-mono leading-relaxed text-sm dark:text-gray-400 text-gray-800">
            <p class="mb-6"><strong class="dark:text-gold-500 text-black bg-yellow-200 dark:bg-transparent px-1">UCATFLAGS</strong> 是由中国科学院大学本科部支持、本科生CTF小组主办的网络安全技能竞赛。本次比赛旨在通过实战演练，激发同学们对网络安全的兴趣，提升信息安全技术水平。</p>
            <div class="p-4 border mt-4 backdrop-blur-md rounded-sm transition-colors dark:border-gray-800 dark:bg-gray-900/40 border-black bg-white shadow-hard">
                <span class="dark:text-gold-500 text-black font-bold">$ cat eligibility.txt</span><br>
                > 对象：中国科学院大学在校本科生<br>
                > 组队：1-4人/队 (根据年级限制)
            </div>
        </div>
    </section>

    <!-- Tracks -->
    <section id="tracks" class="relative z-10">
        <div class="flex flex-col md:flex-row justify-between items-end mb-16">
            <h2 class="text-5xl md:text-6xl font-serif leading-tight glitch-hover dark:text-white text-black">
                Challenges
            </h2>
            <div class="text-right mt-4 md:mt-0 font-mono text-xs dark:text-gray-600 text-gray-500 font-bold">
                // MODULES_COUNT: 6 <br> // STATUS: DEPLOYED
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Web -->
            <a href="web/web.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">01</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">HTTP</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">Web 安全</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">深入理解 Web 架构，挖掘应用层安全漏洞。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">SQLi</span><span class="skill-tag">RCE</span><span class="skill-tag">Java</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Pwn -->
            <a href="binary/binary.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">02</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">BIN</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">Pwn</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">探索二进制底层原理，利用内存错误获取权限。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">Stack</span><span class="skill-tag">Heap</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Reverse -->
            <a href="binary/binary.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">03</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">ASM</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">Reverse</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">逆向分析程序逻辑，还原核心算法与代码结构。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">IDA</span><span class="skill-tag">Anti-Debug</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Crypto -->
            <a href="crypto/crypto.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">04</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">MATH</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">Crypto</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">基于数学原理的密码分析与算法破译。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">RSA</span><span class="skill-tag">ECC</span>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Misc -->
            <a href="misc/misc.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">05</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">DATA</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">Misc</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">涵盖隐写术、流量分析及电子取证的综合挑战。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">Forensics</span><span class="skill-tag">Stego</span>
                        </div>
                    </div>
                </div>
            </a>
            
            <!-- PPC -->
            <a href="ppc/ppc.html" class="card-container h-[350px] hover-trigger group block">
                <div class="card-inner w-full h-full relative flex flex-col p-8 rounded-sm">
                    <div class="card-glare"></div>
                    <div class="card-content">
                        <div class="flex justify-between mb-6">
                            <span class="font-serif text-4xl italic transition-colors dark:text-gray-700 dark:group-hover:text-gold-500 text-gray-300 group-hover:text-black">06</span>
                            <span class="font-mono text-xs border px-2 py-1 rounded-none transition-colors dark:border-gray-700 dark:text-gray-500 border-black text-black font-bold">ALG</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white text-black">PPC</h3>
                        <p class="text-xs mb-4 dark:text-gray-400 text-gray-600">考察快速编程能力与复杂算法问题的自动化求解。</p>
                        <div class="flex flex-wrap gap-1">
                            <span class="skill-tag">Python</span><span class="skill-tag">Algo</span>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </section>

    <!-- Schedule -->
    <section id="schedule" class="relative z-10">
        <h2 class="text-5xl font-serif mb-12 glitch-hover dark:text-white text-black">Timeline</h2>
        <div class="relative border-l-2 ml-4 pl-8 space-y-12 transition-colors dark:border-gray-800 border-gray-200">
            
            <div class="timeline-item relative" data-end="2026-03-07T23:59:59">
                <div class="timeline-dot absolute -left-[37px] top-2 w-3 h-3 rounded-full transition-all duration-300 bg-gray-300 dark:bg-white border-2 border-white dark:border-none ring-2 ring-black dark:ring-0"></div>
                <div class="flex flex-col md:flex-row md:items-baseline gap-4">
                    <span class="font-mono min-w-[150px] dark:text-gray-500 text-gray-400 font-bold">2026.03.07</span>
                    <div>
                        <h3 class="text-xl font-bold dark:text-white text-black">报名截止 <span class="badge-done" style="display:none">ENDED</span></h3>
                        <p class="text-sm mt-1 dark:text-gray-500 text-gray-500">组队系统关闭。</p>
                    </div>
                </div>
            </div>

            <div class="timeline-item relative" data-start="2026-03-09T08:00:00" data-end="2026-03-20T23:59:59">
                <div class="timeline-dot absolute -left-[37px] top-2 w-3 h-3 rounded-full transition-all duration-300 bg-gray-300 dark:bg-white border-2 border-white dark:border-none ring-2 ring-black dark:ring-0"></div>
                <div class="flex flex-col md:flex-row md:items-baseline gap-4">
                    <span class="font-mono min-w-[150px] dark:text-gray-500 text-gray-400 font-bold">03.09 - 03.20</span>
                    <div>
                        <h3 class="text-xl font-bold dark:text-white text-black">CTF 线上夺旗赛 <span class="badge-live" style="display:none">LIVE</span></h3>
                        <p class="text-sm mt-1 dark:text-gray-500 text-gray-500">正式比赛阶段。启用动态积分系统。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Details -->
    <section id="details" class="relative z-10">
        <h2 class="text-5xl font-serif mb-12 glitch-hover dark:text-white text-black">Scoring</h2>
        <div class="glass-table-container border p-6 backdrop-blur-sm rounded-sm transition-colors dark:border-gray-800 dark:bg-gray-900/40 border-black bg-white shadow-hard">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4 dark:text-white text-black">Dynamic Scoring</h3>
                    <p class="text-sm leading-relaxed font-mono dark:text-gray-400 text-gray-600">
                        本届比赛采用动态分值系统。题目的基础分值为 500 分。随着解出该题目的队伍数量增加，该题目的分值将按照特定算法呈指数级下降，最低降至 50 分。
                    </p>
                    <div class="mt-4 h-1 w-full bg-gradient-to-r dark:from-gold-500 from-black to-transparent"></div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 dark:text-white text-black">Bonus</h3>
                    <ul class="text-sm space-y-2 font-mono dark:text-gray-400 text-gray-600">
                        <li class="flex justify-between border-b pb-2 dark:border-gray-800 border-gray-200"><span>First Blood (一血)</span> <span class="dark:text-gold-400 text-black bg-yellow-200 dark:bg-transparent px-1 font-bold">+5% pts</span></li>
                        <li class="flex justify-between border-b pb-2 dark:border-gray-800 border-gray-200"><span>Second Blood (二血)</span> <span class="dark:text-gray-300 text-gray-700 font-bold">+3% pts</span></li>
                        <li class="flex justify-between border-b pb-2 dark:border-gray-800 border-gray-200"><span>Third Blood (三血)</span> <span class="text-orange-500 font-bold">+1% pts</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <footer class="border-t py-12 text-center font-mono text-xs relative z-10 transition-colors
        dark:border-gray-900 dark:bg-[#020202] dark:text-gray-600
        border-black bg-white text-gray-500">
        <p>UCATFLAGS 2025+ // PRACTICE & LEARN</p>
    </footer>

    <!-- Scripts -->
    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            updateThreeTheme(isDark);
        }

        // --- 核心修复：移动端菜单逻辑 ---
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');
        const body = document.body;

        function toggleMenu() {
            if (!mobileMenu) return;
            const isCurrentlyOpen = mobileMenu.classList.contains('visible-menu');
            
            if (isCurrentlyOpen) {
                // 关闭菜单
                mobileMenu.classList.remove('visible-menu');
                mobileMenu.classList.add('hidden-menu');
                
                // 移除 Body 上的锁定类
                body.classList.remove('menu-open');
                
                // 恢复所有元素的点击事件
                body.style.touchAction = ''; 
            } else {
                // 打开菜单
                mobileMenu.classList.remove('hidden-menu');
                mobileMenu.classList.add('visible-menu');
                
                // 添加 Body 锁定类 (CSS中设置 overflow: hidden)
                body.classList.add('menu-open');
            }
        }

        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation(); // 防止冒泡
                toggleMenu();
            });
        }

        // 点击菜单内部链接后自动关闭
        mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                setTimeout(() => {
                    if (mobileMenu.classList.contains('visible-menu')) {
                        toggleMenu();
                    }
                }, 150);
            });
        });

        // 点击背景遮罩层关闭
        if (mobileMenu) {
            mobileMenu.addEventListener('click', (e) => {
                // 只有直接点击背景遮罩层或内部空白容器时才关闭
                if (e.target === mobileMenu || e.target.classList.contains('min-h-full')) {
                    toggleMenu();
                }
            });
        }

        const bgCanvas = document.querySelector('#bg-canvas');
        const scene = new THREE.Scene();
        // 默认为 Dark Mode 
        scene.fog = new THREE.FogExp2(0x020202, 0.002);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: bgCanvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight); renderer.setPixelRatio(window.devicePixelRatio);
        
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 400; 
        const posArray = new Float32Array(particlesCount * 3);
        for(let i = 0; i < particlesCount * 3; i++) { posArray[i] = (Math.random() - 0.5) * 150; }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        
        // 默认为 Dark Mode 的金色粒子
        const particlesMaterial = new THREE.PointsMaterial({ size: 0.25, color: 0xD4AF37, transparent: true, opacity: 0.6 });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);
        camera.position.z = 30; camera.position.y = 5;

        function updateThreeTheme(isDark) {
            if (isDark) {
                gsap.to(scene.fog.color, { r: 2/255, g: 2/255, b: 2/255, duration: 0.5 });
                gsap.to(particlesMaterial.color, { r: 212/255, g: 175/255, b: 55/255, duration: 0.5 });
            } else {
                gsap.to(scene.fog.color, { r: 1, g: 1, b: 1, duration: 0.5 });
                gsap.to(particlesMaterial.color, { r: 0, g: 0, b: 0, duration: 0.5 });
            }
        }

        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (event) => { mouseX = event.clientX / window.innerWidth - 0.5; mouseY = event.clientY / window.innerHeight - 0.5; });
        const clock = new THREE.Clock();
        function animateThree() {
            requestAnimationFrame(animateThree);
            const elapsedTime = clock.getElapsedTime();
            particlesMesh.rotation.y = elapsedTime * 0.05;
            camera.position.x += (mouseX * 5 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 2 + 5 - camera.position.y) * 0.05;
            camera.lookAt(0, 0, 0);
            renderer.render(scene, camera);
        }
        animateThree();
        window.addEventListener('resize', () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); });

        // --- 优化后的光标逻辑 (RAF Loop) ---
        const cursor = document.getElementById('cursor');
        const hoverTriggers = document.querySelectorAll('.hover-trigger');
        let cursorX = -100, cursorY = -100; // 初始位置在屏幕外
        
        document.addEventListener('mousemove', (e) => { 
            cursorX = e.clientX; 
            cursorY = e.clientY; 
        });
        
        // 使用 requestAnimationFrame 更新光标位置
        function updateCursor() {
            if(cursor) {
                cursor.style.transform = `translate3d(${cursorX}px, ${cursorY}px, 0) translate(-50%, -50%)`;
            }
            requestAnimationFrame(updateCursor);
        }
        updateCursor();

        hoverTriggers.forEach(el => { 
            el.addEventListener('mouseenter', () => cursor.classList.add('hovered')); 
            el.addEventListener('mouseleave', () => cursor.classList.remove('hovered')); 
        });

        gsap.registerPlugin(ScrollTrigger);
        gsap.from(".countdown-item", { duration: 1, y: 30, opacity: 0, delay: 1, stagger: 0.2 });
        gsap.utils.toArray("section h2").forEach(h2 => { gsap.from(h2, { scrollTrigger: { trigger: h2, start: "top 80%", toggleActions: "play none none reverse" }, y: 50, opacity: 0, duration: 1 }); });
        gsap.from(".card-container", { scrollTrigger: { trigger: "#tracks", start: "top 70%" }, y: 50, opacity: 0, duration: 0.8, stagger: 0.1 });
        const cards = document.querySelectorAll('.card-container');
        cards.forEach(card => {
            const glare = card.querySelector('.card-glare');
            card.addEventListener('mousemove', (e) => { const rect = card.getBoundingClientRect(); const x = e.clientX - rect.left; const y = e.clientY - rect.top; glare.style.setProperty('--mouse-x', `${x}px`); glare.style.setProperty('--mouse-y', `${y}px`); });
        });
        const targetDate = new Date('2026-03-09T08:00:00').getTime(); 
        function updateStatus() {
            const now = new Date().getTime(); const distance = targetDate - now;
            if (distance > 0) {
                document.getElementById("days").innerText = String(Math.floor(distance / (1000 * 60 * 60 * 24))).padStart(2,'0');
                document.getElementById("hours").innerText = String(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2,'0');
                document.getElementById("minutes").innerText = String(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))).padStart(2,'0');
                document.getElementById("seconds").innerText = String(Math.floor((distance % (1000 * 60)) / 1000)).padStart(2,'0');
            }
        }
        setInterval(updateStatus, 1000); updateStatus();
    </script>
</body>
</html>
